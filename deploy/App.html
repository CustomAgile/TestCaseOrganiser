<!DOCTYPE html>
<html>
<head>
    <title>TestCaseOrganiser</title>

    <script type="text/javascript" src="/apps/2.0/sdk.js"></script>

    <script type="text/javascript">
        Rally.onReady(function () {
                Ext.define("CustomApp",{extend:"Rally.app.App",componentCls:"app",layout:"hbox",align:"stretch",autoscroll:!1,items:[{xtype:"container",id:"folderbox",margin:10,flex:1,items:[{xtype:"label",html:"<b> Test Folder Hierarchy </b>"}]},{xtype:"container",margin:10,id:"casebox",flex:1,items:[{xtype:"label",html:"<b>Test Cases not in a Folder</b>"}]},{xtype:"container",margin:10,id:"setbox",flex:1,items:[{xtype:"label",html:"<b>Test Sets</b>"}]}],_onIterationsLoaded:function(){},_onIterationChanged:function(){},_onStoreBuilt:function(store){Ext.getCmp("setbox").add({xtype:"rallygridboard",context:this.getContext(),modelNames:["testset"],toggleState:"grid",gridConfig:{store:store,columnCfgs:["Project","Iteration","Release","TestCaseCount"]},height:800})},launch:function(){var app=this;Ext.create("Rally.data.wsapi.TreeStoreBuilder").build({models:["testset"],autoLoad:!0,enableHierarchy:!0,fetch:["FormattedId","Release","TestCaseCount"]}).then({success:this._onStoreBuilt,scope:this}),Rally.state.SessionStorage.initialize("testcaseorganiser");var tree=Ext.create("Rally.ui.tree.TestOrganiserTree",{id:"folderTree",height:800,autoScroll:!0,config:{displayedFields:["Name","Project"],topLevelModel:Ext.identityFn("TestFolder")},topLevelStoreConfig:{fetch:["FormattedID","Name","Parent","Children","TestCases","Project"],sorters:[],context:{projectScopeUp:!0,projectScopeDown:!0}},childItemsStoreConfigForParentRecordFn:function(){return{fetch:["FormattedID","Name","Parent","Children","TestCases","Project","TestFolder"],sorters:[],context:{projectScopeUp:!0,projectScopeDown:!0}}},listeners:{recordsaved:function(record){this.refresh(),Ext.getCmp("caseTree").refresh()}},scope:tree});Ext.getCmp("folderbox").add(tree);var cases=Ext.create("Rally.ui.tree.TestOrganiserTree",{id:"caseTree",height:800,autoScroll:!0,config:{displayedFields:["Name","Project"],topLevelModel:Ext.identityFn("TestCase"),topLevelParentAttribute:"TestFolder"},topLevelStoreConfig:{fetch:["FormattedID","Name","TestFolder","Project"],sorters:[],context:{projectScopeUp:!0,projectScopeDown:!0}}});Ext.getCmp("casebox").add(cases)}});
                Ext.define("AddTestCaseMenuItem",{extend:Rally.ui.menu.item.RecordMenuItem,alias:"widget.rallyrecordmenuitemaddtestcase",config:{text:"Add testcase...",cls:"icon-test-case"},constructor:function(config){config=config||{},config.predicate=config.predicate||Rally.predicate.RecordPredicates.mustPassAllPredicates([Rally.predicate.RecordPredicates.isUpdatable,Rally.predicate.RecordPredicates.canHaveChildren]),config.handler=config.handler||this._onAddChildClicked,this.initConfig(config),this.callParent(arguments)},_getChildType:function(){var field=this.record.getField("TestCases");return field.attributeDefinition.AllowedValueType._refObjectName},_getCpoid:function(record){var project=record.get("Project")||{_ref:record.self.context.project};return Rally.util.Ref.getOidFromRef(project._ref)},_onAddChildClicked:function(){window.detail&&(window.detail.refreshContent=!1);var childType=this._getChildType(),record=this.record,params=this._buildParamsForEditor(record);Rally.data.wsapi.ModelFactory.getModel({type:childType,context:record.self.context}).then(function(ChildModel){params.typeDef=ChildModel.typeDefOid,Rally.nav.Manager.create(childType,params)})},_buildParamsForEditor:function(parent){var params={parent:parent.get("ObjectID"),parentTypeDef:parent.self.typeDefOid,cpoid:this._getCpoid(parent),TestFolder:parent.get("_ref")};return params}});
                Ext.define("AddSubFolderMenuItem",{extend:Rally.ui.menu.item.RecordMenuItem,alias:"widget.rallyrecordmenuitemaddsubfolder",config:{text:"Add folder...",cls:"icon-folder"},constructor:function(config){config=config||{},config.predicate=config.predicate||Rally.predicate.RecordPredicates.mustPassAllPredicates([Rally.predicate.RecordPredicates.isUpdatable,Rally.predicate.RecordPredicates.canHaveChildren]),config.handler=config.handler||this._onAddChildClicked,this.initConfig(config),this.callParent(arguments)},_getChildType:function(){var field=this.record.getField("Children");return field.attributeDefinition.AllowedValueType._refObjectName},_getCpoid:function(record){var project=record.get("Project")||{_ref:record.self.context.project};return Rally.util.Ref.getOidFromRef(project._ref)},_onAddChildClicked:function(){window.detail&&(window.detail.refreshContent=!1);var childType=this._getChildType(),record=this.record,params=this._buildParamsForEditor(record);Rally.data.wsapi.ModelFactory.getModel({type:childType,context:record.self.context}).then(function(ChildModel){params.typeDef=ChildModel.typeDefOid,Rally.nav.Manager.create(childType,params)})},_buildParamsForEditor:function(parent){var params={parent:parent.get("ObjectID"),parentTypeDef:parent.self.typeDefOid,cpoid:this._getCpoid(parent),Parent:Rally.util.Ref.getOidFromRef(parent.get("_ref"))};return params}});
                Ext.define("AddToTestSetMenuItem",{extend:Rally.ui.menu.item.RecordMenuItem,alias:"widget.rallyrecordmenuitemaddtoTS",config:{text:"Add to testset...",cls:"icon-test-set"},foldersToScan:[],constructor:function(config){config=config||{},config.predicate=config.predicate||Rally.predicate.RecordPredicates.mustPassAllPredicates([Rally.predicate.RecordPredicates.isUpdatable]),config.handler=config.handler||this._onAddToTSClicked,this.initConfig(config),this.callParent(arguments),this.addEvents("syncTarget")},_addTestCasesForTestFolder:function(source,tcList){var self=this,sourceCollection=source.getCollection("TestCases");sourceCollection.load().then({success:function(){if(tcList=tcList.concat(sourceCollection.getRecords()),_.remove(self.foldersToScan,function(testfolder){return testfolder.get("FormattedID")===source.get("FormattedID")}),self.foldersToScan)if(0===self.foldersToScan.length)var store=Ext.data.StoreManager.lookup("wsStore"),ping=store&&store.fireEvent("syncTarget",tcList);else self._scanFolder(_.first(self.foldersToScan),tcList)}})},_scanFolder:function(source,tcList){var self=this,folderCollection=source.getCollection("Children");folderCollection.load().then({success:function(error,result){_.each(folderCollection.data.items,function(record){self.foldersToScan.push(record)}),self._addTestCasesForTestFolder(source,tcList)}})},_onAddToTSClicked:function(){var self=this;window.detail&&(window.detail.refreshContent=!1);var chooser=Ext.create("Rally.ui.dialog.SolrArtifactChooserDialog",{artifactTypes:["testset"],autoShow:!0,title:"Choose Test Set",columns:["FormattedID","Name","Iteration"],listeners:{artifactchosen:function(dialog,selectedRecord){var itemStore=Ext.create("Rally.data.wsapi.Store",{model:"testset",limit:1/0,autoLoad:!0,storeId:"wsStore",batchAction:!0,targetCollection:null,fetch:["FormattedID","TestCases"],filters:[{property:"FormattedID",value:selectedRecord.get("FormattedID")}],listeners:{load:function(store,records,success){var testcaseList=[];this.targetCollection=records[0].getCollection("TestCases"),"testcase"===self.record.get("_type")?(testcaseList.add(self.record),this.targetCollection.load({callback:function(){_.each(testcaseList,function(testcase){this.targetCollection.add(testcase)}),this.targetCollection.sync({success:function(){Rally.ui.notify.Notifier.show({message:"Test Case added to Test Set"})},failure:function(){Rally.ui.notify.Notifier.showError({message:"Failed to add Test Case to Test Set"})}})}})):this.targetCollection.load({callback:function(){self._scanFolder(self.record,testcaseList)}})},syncTarget:function(testcaseList){var store=Ext.data.StoreManager.lookup("wsStore"),syncCount=0;_.each(testcaseList,function(testcase){store.targetCollection.add(testcase)}),store.targetCollection.sync({success:function(){Rally.ui.notify.Notifier.show({message:testcaseList.length+" Test Cases added to Test Set"})},failure:function(){Rally.ui.notify.Notifier.showError({message:"Failed to add Test Cases to Test Set"})}})}}})},scope:this}})}});
                Ext.define("Rally.ui.tree.TestOrganiserTree",{extend:Ext.Container,alias:"widget.testorganisertree",mixins:{messageable:Rally.Messageable},clientMetrics:[{beginMethod:"_beforeInitialLoad",endMethod:"_initialLoad",description:"initial load"},{beginMethod:"drawChildItems",endMethod:"drawItems",description:"loaded child records"},{event:"drag",description:"tree item picked up"},{event:"drop",description:"tree item dropped"}],cls:"rallytree",config:{topLevelModel:"testfolder",topLevelParentAttribute:"Parent",childModelTypesForRecordFn:function(record){return["testcase","testfolder"]},givenAParentTypeWhatChildAttributeConnectsChildToThisParentFn:function(model){return"testfolder"===model?"Parent":"testcase"===model?"TestFolder":void 0},givenAChildRecordWhatIsTheAttributeConnectingItToTheParentFn:function(childRecord){return"testcase"===record.get("_type")?"TestFolder":"Parent"},givenAParentRecordWhatIsTheAttributeConnectingAChildToThisParentFn:function(parentRecord){return"testfolder"===record.get("_type")?"Parent":"TestFolder"},givenAChildAndParentRecordWhatAttributeShouldConnectTheChildToTheParentFn:function(childRecord,parentRecord){return"testcase"===childRecord.get("_type")?"TestFolder":"testfolder"===childRecord.get("_type")?"Parent":void 0},canExpandFn:function(record){return record.get("Children")&&record.get("Children").Count>0||record.get("TestCases")&&record.get("TestCases").Count>0},enableDragAndDrop:!0,dragDropGroupFn:function(record){return Rally.util.Ref.getOidFromRef(record.get("_type"))},dragThisGroupOnMeFn:function(record){return"testfolder"===record.get("_type")?["testcase","testfolder"]:void 0},scope:void 0,topLevelStoreConfig:{fetch:["FormattedID","Name","Parent","Children","TestCases","Project"],sorters:[],context:{projectScopeUp:!0,projectScopeDown:!0}},childItemsStoreConfigForParentRecordFn:function(){return{}},treeItemConfigForRecordFn:function(record){var config={selectable:!0,xtype:"testtreeitem"};return"testfolder"===record.get("_type")&&(config.storeConfig={model:"",models:["testfolder","testcase"]}),config},autoLoadTopLevel:!0,emptyText:"<p>No Items Found.</p>",stateful:!0,stateId:"rally-test-tree",actionsForRecordFn:function(record){var items=[{xtype:"rallyrecordmenuitemedit",record:record},{xtype:"rallyrecordmenuitemcopy",record:record},{xtype:"rallyrecordmenuitemaddtoTS",text:"Add to test set",record:record}];return"testfolder"===record.get("_type")&&(items.push({xtype:"rallyrecordmenuitemaddsubfolder",text:"Add folder",record:record}),items.push({xtype:"rallyrecordmenuitemaddtestcase",text:"Add test case",record:record})),items},_addSubFolder:function(record){},listeners:{beforerecordsaved:function(source,target){this.beforeRecordSaved(source,target)}}},constructor:function(config){this.mergeConfig(config),this.config.stateful&&(this.config.stateId?this._treeState=Rally.state.SessionStorage.getInstance().get(this.getStateId())||[]:Ext.Error.raise("A stateId is required if stateful is true.")),this._treeState||(this._treeState=[],this.saveState()),this._drawingChildrenCount=1,this.callParent([this.config])},initComponent:function(){this.callParent(arguments),this.addEvents("beforerecordsaved","recordsaved","itemselected","toplevelload","initialload","drag","drop","refresh");var storeConfig=Ext.applyIf(Ext.clone(this.getTopLevelStoreConfig()),{model:this.getTopLevelModel(),filters:[{property:this.getTopLevelParentAttribute(),value:"null",operator:"="}],sorters:[{property:"Rank",direction:"ASC"}],fetch:this._getDefaultTopLevelFetchFields()}),store=this.topLevelStore=Ext.create(storeConfig.xtype||"store.rallywsapidatastore",storeConfig);store.on("beforeload",this._beforeInitialLoad,this),store.on("load",this.handleParentItemStoreLoad,this),this.getAutoLoadTopLevel()&&store.load(),this.subscribe(this,Rally.Message.objectDestroy,this._onObjectDestroy,this),this.subscribe(this,Rally.Message.objectCreate,this._onObjectCreate,this),this.subscribe(this,Rally.Message.objectUpdate,this._onObjectUpdate,this),this.on("initialload",this._initialLoad,this)},handleParentItemStoreLoad:function(store,records){this.renderParentRecords(records)},renderParentRecords:function(records){records.length>0?this.drawItems(records):(this.fireEvent("initialload"),this.drawEmptyMsg()),this.fireEvent("toplevelload")},_beforeInitialLoad:Ext.emptyFn,_initialLoad:function(){this.getStateful()&&this._saveTreeStateToSessionStorage(),this.publish(Rally.Message.treeLoaded),Rally.BrowserTest&&Rally.BrowserTest.publishComponentReady(this),this._treeLoaded=!0},findTreeItemForRecord:function(record){var xtype,treeItemConfig=this.getTreeItemConfigForRecordFn().call(this,record);return treeItemConfig&&(xtype=treeItemConfig.xtype),xtype?Ext.Array.filter(this.query(xtype),function(treeItem){return treeItem.getRecord().get("_ref")===record.get("_ref")})[0]:void 0},findTreeItemForChildRecord:function(childRecord){var parentAttribute=this.getGivenAChildRecordWhatIsTheAttributeConnectingItToTheParentFn().call(this,childRecord),parentRef=childRecord.get(parentAttribute)&&childRecord.get(parentAttribute)._ref;return parentRef?Ext.Array.filter(this.query("rallytreeitem"),function(treeItem){return treeItem.getRecord().get("_ref")===parentRef},this)[0]:void 0},_onObjectDestroy:function(record){var treeItem=this.findTreeItemForRecord(record);treeItem&&this._removeTreeItem(treeItem)},_onObjectCreate:function(record){this._insertRecord(record,!1)},_refresh:function(callback){callback&&this.on("toplevelload",callback,this,{single:!0}),this.removeAll(),this.topLevelStore.load()},refresh:function(callback){this._refresh(callback)},_insertRecord:function(record,forceParent){var parentTreeItem=this.findTreeItemForChildRecord(record);if(!forceParent||parentTreeItem){var treeItem=this._createTreeItem(record);this.insertItem(treeItem,parentTreeItem)}},_onObjectUpdate:function(record){var parentTreeItem=this.findTreeItemForChildRecord(record);parentTreeItem&&this._addTreeItemToSessionStorage(parentTreeItem);var _afterOnObjectUpdate=Ext.bind(this._afterOnObjectUpdate,this);this.refresh(function(){_afterOnObjectUpdate(record)})},_afterOnObjectUpdate:function(){this._fireRefreshEvent()},_displayFlair:function(message){Rally.ui.notify.Notifier.show({message:message})},beforeRecordSaved:function(record,newParentRecord){this._isTestFolder(record)?record.set("Project",newParentRecord.get("Project")._ref):this._isTestCase(record)&&(record.set("Project",newParentRecord.get("Project")._ref),record.set("TestFolder",newParentRecord.get("_ref")))},loadTopLevel:function(){this.topLevelStore.load()},drawEmptyMsg:function(){var emptyTextMessage=this.getEmptyText();this.add({xtype:"component",html:Rally.ui.EmptyTextFactory.getEmptyTextFor(emptyTextMessage)})},insertItem:function(treeItem,parentTreeItem){var removedFromParent=!1,insertIndex=-1;treeItem.parentTreeItem?parentTreeItem&&parentTreeItem.getRecord().get("_ref")===treeItem.parentTreeItem.getRecord().get("_ref")||(removedFromParent=!0,treeItem.parentTreeItem.removeChildItem(treeItem),treeItem.parentTreeItem.reloadAndDraw()):(this.remove(treeItem,!1),removedFromParent=!0),parentTreeItem?parentTreeItem.getExpanded()?(treeItem.setParentTreeItem(parentTreeItem),parentTreeItem.insertChildItemByRank(treeItem,this._fireRefreshEvent,this)):(parentTreeItem.reloadAndDraw(parentTreeItem.expandOrCollapse,parentTreeItem),removedFromParent&&treeItem.destroy()):this.topLevelStore.model&&this.topLevelStore.model.typePath===treeItem.getRecord().self.typePath.toLowerCase()&&(this.topLevelStore.add(treeItem.getRecord()),Rally.data.Ranker.isDnDRankable(this.topLevelStore)&&(insertIndex=_.sortedIndex(this.items.getRange(),treeItem,treeItem.getRank)),this.insert(insertIndex,treeItem),this._fireRefreshEvent())},drawItems:function(records,parentTreeItem){Ext.suspendLayouts();for(var i=0;records.length>i;i++){var record=records[i];this._drawTreeItem(record,parentTreeItem)}this._drawingChildrenCount--,Ext.resumeLayouts(!0),Ext.defer(function(){0===this._drawingChildrenCount&&(this._treeLoaded?this._fireRefreshEvent():this.fireEvent("initialload")),this.publish(Rally.Message.treeItemExpanded)},1,this)},_getShouldExpand:function(record){return this.getStateful()&&this._sessionStorageContainsTreeItem(record)},_createTreeItem:function(record){var treeItemConfig=this.getTreeItemConfigForRecordFn().call(this.getScope(),record);treeItemConfig=treeItemConfig||{},treeItemConfig=Ext.applyIf(treeItemConfig,{xtype:"rallytreeitem",record:record,canExpandFn:this.getCanExpandFn(),scope:this.getScope(),canDrag:this.getEnableDragAndDrop(),canDropOnMe:this.getEnableDragAndDrop(),actionsForRecordFn:Ext.isFunction(this.getActionsForRecordFn())?Ext.bind(this.getActionsForRecordFn(),this):null,expanded:this._getShouldExpand(record),listeners:{expand:this.expandItem,collapse:this.collapseItem,select:this.selectTreeItem,scope:this}});var treeItem=Ext.ComponentManager.create(treeItemConfig);return this.getEnableDragAndDrop()&&treeItem.on("draw",function(){this.makeTreeItemDraggable(treeItem)},this),treeItem},_drawTreeItem:function(record,parentTreeItem){var treeItem=this._createTreeItem(record);parentTreeItem?(treeItem.setParentTreeItem(parentTreeItem),parentTreeItem.addChildItem(treeItem)):this.add(treeItem)},drawChildItems:function(parentTreeItem){this._drawingChildrenCount++;var self=this,childModelTypes=this.getChildModelTypesForRecordFn().call(this.getScope(),parentTreeItem.getRecord());_.each(childModelTypes,function(model){var parentAttribute=self.getGivenAParentTypeWhatChildAttributeConnectsChildToThisParentFn().call(self.getScope(),model),storeConfig=self.getChildItemsStoreConfigForParentRecordFn().call(self.getScope(),model);storeConfig=storeConfig||{},storeConfig=Ext.applyIf(storeConfig,{model:model,filters:[{property:parentAttribute,value:parentTreeItem.getRecord().get("_ref"),operator:"="}],sorters:[],context:{project:void 0},fetch:self._getChildTypeFetchFields(parentAttribute)});var childStore=Ext.create(storeConfig.xtype||"store.rallywsapidatastore",storeConfig);childStore.on("load",function(store,records){self.handleChildItemStoreLoad(store,Ext.clone(records),parentTreeItem)}),parentTreeItem.store=childStore,childStore.load()},self)},handleChildItemStoreLoad:function(store,records,parentTreeItem){this.renderChildRecords(records,parentTreeItem)},renderChildRecords:function(records,parentTreeItem){this.drawItems(records,parentTreeItem)},makeTreeItemDraggable:function(treeItem){var tree=this;if(treeItem.getCanDrag()){var me=this,dragSource=Ext.create("Ext.dd.DragSource",treeItem.getEl(),{treeItem:treeItem,ddGroup:this.getDragDropGroupFn().call(this.getScope(),treeItem.getRecord()),isTarget:!1,proxy:Ext.create("Ext.dd.StatusProxy",{animRepair:!0,shadow:!1,dropNotAllowed:"rallytree-proxy"}),beforeDragDrop:function(){return me.fireEvent("drag",treeItem),!0},afterDragDrop:function(){me.fireEvent("drop",treeItem)}});dragSource.setHandleElId(treeItem.getEl().down(".drag").id)}if(treeItem.getCanDropOnMe()){var dropTarget=Ext.create("Rally.ui.tree.TreeItemDropTarget",treeItem.down("#treeItemContent").getEl(),{tree:tree,treeItem:treeItem});treeItem.dropTarget&&treeItem.dropTarget.unreg(),treeItem.dropTarget=dropTarget;var dropTargetGroups=this.getDragThisGroupOnMeFn().call(this.getScope(),treeItem.getRecord());Ext.isArray(dropTargetGroups)||(dropTargetGroups=[dropTargetGroups]),Ext.each(dropTargetGroups,function(dropTargetGroup){dropTarget.addToGroup(dropTargetGroup)})}},_removeTreeItem:function(treeItem){treeItem.destroy(),treeItem.getParentTreeItem()&&treeItem.getParentTreeItem().reloadAndDraw(function(){this._fireRefreshEvent()},this),0===this.query("rallytreeitem").length&&this.drawEmptyMsg(),this._fireRefreshEvent()},expandItem:function(treeItem){treeItem.removeChildItems(),this.drawChildItems(treeItem),this.getStateful()&&this._addTreeItemToSessionStorage(treeItem)},collapseItem:function(treeItem){if(this.getStateful()){var treeItems=treeItem.query("rallytreeitem");Ext.Array.forEach(treeItems,function(item){this._removeTreeItemFromSessionStorage(item)},this),this._removeTreeItemFromSessionStorage(treeItem)}treeItem.removeChildItems(),this._fireRefreshEvent(),this.publish(Rally.Message.treeItemCollapsed)},selectTreeItem:function(treeItem){Ext.Array.forEach(this.getEl().query(".treeItemSelected"),function(treeItemEl){Ext.get(treeItemEl).removeCls("treeItemSelected")}),treeItem.getEl().down(".treeItemContent").addCls("treeItemSelected"),this.fireEvent("itemselected",treeItem),this.publish(Rally.Message.objectFocus,treeItem.getRecord(),this)},destroy:function(){this.callParent(arguments)},_fireRefreshEvent:function(){this.fireEvent("refresh")},_saveTreeStateToSessionStorage:function(){this._treeState=Ext.Array.map(this.query("rallytreeitem[expanded=true]"),function(treeItem){return treeItem.getRecord().get("ObjectID")}),this.saveState()},_addTreeItemToSessionStorage:function(treeItem){var oids=this.getState();Ext.Array.contains(oids,treeItem.getRecord().get("ObjectID"))||(oids.push(treeItem.getRecord().get("ObjectID")),this.saveState())},_removeTreeItemFromSessionStorage:function(treeItem){Ext.Array.remove(this.getState(),treeItem.getRecord().get("ObjectID")),this.saveState()},_sessionStorageContainsTreeItem:function(record){return Ext.Array.contains(this.getState(),record.get("ObjectID"))},_getDefaultTopLevelFetchFields:function(){return["FormattedID","Name","ObjectID","Children","TestCases","Project"]},_getChildTypeFetchFields:function(parentFieldName){return this._getDefaultTopLevelFetchFields().concat([parentFieldName,"Name","ObjectID","FormattedID","Project"])},_isTestFolder:function(record){return"testfolder"===record.get("_type")},_isTestCase:function(record){return"testcase"===record.get("_type")},getState:function(){return this._treeState},saveState:function(){Rally.state.SessionStorage.getInstance().set(this.getStateId(),this.getState())},initState:function(){}});
                Ext.define("Rally.ui.tree.TestFolderTreeItem",{extend:Rally.ui.tree.TreeItem,alias:"widget.testtreeitem",config:{displayedFields:["Name","Project"]},getContentTpl:function(){var me=this;return Ext.create("Ext.XTemplate",'<tpl if="this.canDrag()"><div class="icon drag"></div></tpl>',"{[this.getActionsGear()]}",'<div class="textContent ellipses">{[this.getFormattedId()]} - {Name} ({[this.getProject()]})</div>','<div class="rightSide">',"{[this.getScheduleState(values)]}","</div>",{canDrag:function(){return me.getCanDrag()},getActionsGear:function(){return me._buildActionsGearHtml()},getProject:function(){return Rally.ui.renderer.RendererFactory.renderRecordField(me.getRecord(),"Project")},getFormattedId:function(){return Rally.ui.renderer.RendererFactory.renderRecordField(me.getRecord(),"FormattedID")}})}});
                (function(){var Ext=window.Ext4||window.Ext;Ext.define("Rally.data.wsapi.collection.Proxy",{extend:"Rally.data.wsapi.Proxy",requires:["Rally.data.wsapi.ProxyBase"],alias:["proxy.Rally.data.WsapiCollectionProxy","proxy.rallywsapicollectionproxy"],alternateClassName:["Rally.data.WsapiCollectionProxy"],mixins:{proxy:"Rally.data.wsapi.ProxyBase"},urlMappings:{create:"add",destroy:"remove"},statics:{MAX_ARTIFACTS_PER_OPERATION:25},constructor:function(){this.callParent(arguments)},buildRequest:function(operation){var request=this.callParent(arguments);return request.requester=this.requester,request},buildUrl:function(request){return request.url=this.url,this.urlMappings[request.action]&&(request.url+="/"+this.urlMappings[request.action]),request.url},getMethod:function(request){return"read"===request.action?"GET":"POST"},batch:function(options,listeners){var me=this,useBatch=me.batchActions,batch,records,actions,aLen,action,a;void 0===options.operations&&(options={operations:options,listeners:listeners}),options.batch?Ext.isDefined(options.batch.runOperation)&&(batch=Ext.applyIf(options.batch,{proxy:me,listeners:{}})):options.batch={proxy:me,listeners:options.listeners||{}},batch||(batch=new Ext.data.Batch(options.batch)),batch.on("complete",Ext.bind(me.onBatchComplete,me,[options],0)),actions=me.batchOrder.split(","),aLen=actions.length;var addBatch=function(record){batch.add(new Ext.data.Operation({action:action,records:[record]}))},addBatches=function(recordBatch){useBatch?batch.add(new Ext.data.Operation({action:action,records:recordBatch})):_.each(recordBatch,addBatch)};for(a=0;aLen>a;a++){action=actions[a],records=options.operations[action];var recordBatches=this._splitBatch(records);_.each(recordBatches,addBatches,recordBatches)}return batch.start(),batch},_splitBatch:function(records){var getBatchIndex=function(element,index){return Math.floor(index/this.self.MAX_ARTIFACTS_PER_OPERATION)};return _.chain(records).groupBy(getBatchIndex,this).toArray().value()}})})();

            Rally.launchApp('CustomApp', {
                name:"TestCaseOrganiser",
	            parentRepos:""
            });

        });
    </script>


    <style type="text/css">
        
    </style>
</head>
<body>
</body>
</html>
